{
    // VSCode 任务配置文件版本
    "version": "2.0.0",

    // 任务列表
    "tasks": [
        // ========================================
        // 任务 1: 主编译任务（默认，支持 C++20 和调试）
        // ========================================
        {
            "type": "cppbuild",                    // 任务类型：C++ 编译
            "label": "C/C++: g++.exe 生成活动文件",  // 任务名称
            "command": "D:\\ProgrammingEnvironment\\CCompilingEnvironment\\MingGW\\mingw64\\bin\\g++.exe",  // g++ 编译器路径

            // 编译参数
            "args": [
                "-fdiagnostics-color=always",      // 启用彩色诊断输出
                "-g",                              // 生成调试信息
                "-std=c++20",                      // 使用 C++20 标准
                "${file}",                         // 当前打开的文件
                "-D",                              // 定义宏
                "DEBUG_FLAG",                      // 定义 DEBUG_FLAG 宏（用于条件编译）
                "-o",                              // 指定输出文件
                "${fileDirname}/.vscode/exe/${fileBasenameNoExtension}.exe"  // 输出到 .vscode/exe 目录
            ],

            // 编译选项
            "options": {
                "cwd": "${fileDirname}"            // 工作目录：当前文件所在目录
            },

            // 问题匹配器：用于识别编译错误
            "problemMatcher": [
                "$gcc"                             // 使用 GCC 错误格式
            ],

            // 任务组设置
            "group": {
                "kind": "build",                   // 任务类型：构建
                "isDefault": true                  // 设为默认构建任务（Ctrl+Shift+B）
            },

            "detail": "调试器生成的任务。"
        },

        // ========================================
        // 任务 2: 简单编译任务（输出到当前目录）
        // ========================================
        {
            "type": "cppbuild",                    // 任务类型：C++ 编译
            "label": "C/C++: g++.exe build active file",  // 任务名称
            "command": "D:\\ProgrammingEnvironment\\CCompilingEnvironment\\MingGW\\mingw64\\bin\\g++.exe",  // g++ 编译器路径

            // 编译参数（简化版）
            "args": [
                "-fdiagnostics-color=always",      // 启用彩色诊断输出
                "-g",                              // 生成调试信息
                "${file}",                         // 当前打开的文件
                "-o",                              // 指定输出文件
                "${fileDirname}\\${fileBasenameNoExtension}.exe"  // 输出到当前文件所在目录
            ],

            // 编译选项
            "options": {
                "cwd": "${fileDirname}"            // 工作目录：当前文件所在目录
            },

            // 问题匹配器
            "problemMatcher": [
                "$gcc"                             // 使用 GCC 错误格式
            ],

            // 任务组设置
            "group": {
                "kind": "build",                   // 任务类型：构建
                "isDefault": false                 // 非默认任务
            },

            "detail": "Task generated by Debugger."
        },

        // ========================================
        // 任务 3: 准备任务（复制模板文件）
        // ========================================
        {
            "type": "shell",                       // 任务类型：Shell 命令
            "label": "prepare",                    // 任务名称
            "command": "copy",                     // Windows 复制命令

            // 命令参数
            "args": [
                "${workspaceFolder}\\template.cpp",           // 源文件：模板文件
                "${workspaceFolder}\\${relativeFile}"         // 目标文件：当前相对路径文件
            ],

            "problemMatcher": []                   // 不使用问题匹配器
        },

        // ========================================
        // 任务 4: 备用编译任务
        // ========================================
        {
            "type": "cppbuild",                    // 任务类型：C++ 编译
            "label": "C/C++: g++.exe build active file",  // 任务名称
            "command": "D:\\ProgrammingEnvironment\\CCompilingEnvironment\\MingGW\\mingw64\\bin\\g++.exe",  // g++ 编译器路径

            // 编译参数
            "args": [
                "-fdiagnostics-color=always",      // 启用彩色诊断输出
                "-g",                              // 生成调试信息
                "${file}",                         // 当前打开的文件
                "-o",                              // 指定输出文件
                "${fileDirname}\\${fileBasenameNoExtension}.exe"  // 输出到当前目录
            ],

            // 编译选项
            "options": {
                "cwd": "${fileDirname}"            // 工作目录：当前文件所在目录
            },

            // 问题匹配器
            "problemMatcher": [
                "$gcc"                             // 使用 GCC 错误格式
            ],

            "group": "build",                      // 任务组：构建
            "detail": "compiler: D:\\ProgrammingEnvironment\\CCompilingEnvironment\\MingGW\\mingw64\\bin\\g++.exe"
        }
    ]
}